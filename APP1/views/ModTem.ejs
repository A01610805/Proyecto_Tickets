<%- include('includes/head.ejs') %>

        <div class="">
            <a class="dropdown-trigger btn" href="#!" data-target="dropdown1">Cambiar Categoria<i class="material-icons right">arrow_drop_down</i></a>
            <ul id = "dropdown1" class=" hide-on-med-and-down dropdown-content">
                <% for (let categoria of categorias) { %>
                    <li class="">
                        <a href="/modificar_template/get_preg/<%= categoria.ID_categoria %>/<%= categoria.nombre_categoria %>" class=""><%= categoria.nombre_categoria %></a>
    
                    </li>
                <% } %>
             </ul>
             
        </div>
         

        
            <form action="/modificar_template/camb_cat/<%= id %>" method="post" id="form" class="respuesta_ajax" style="background-color: azure; border-radius: 1%; padding: 10px;">
                <h1>Modificar template</h1>
                <div>
                    <h3 for=""><%= nombre %></h3>
                    <div >
                        <label for="">Establece nuevo nombre de categoria: </label>
                        <input required id="titulo" name="titulo"><span class=""></span>
                        
                        
                    </div>
                    <div >

                        <label for="">Establece nuevo tiempo estimado: </label>
                        <input required id="tiempo" name="tiempo"><span class=""></span>
                        
                        
                    </div>
                </div>
            
                <% for (let pregunta of preguntas) { %> 
                    <input type="hidden" name = "text_preg" value="<%= pregunta.texto_pregunta %>">
                    <input type="hidden" name = "ID_preg" value="<%= pregunta.texto_pregunta %>">
                <% } %> 
                <% for (let pregunta of preguntas) { %> 
                    <div>

                        <label  ><b><%= pregunta.texto_pregunta %></b></label><label> </label><label>Pregunta nueva:</label>
                        <div class="row col s12">
                            <input type="hidden" name = "ID_pregunta" value="<%= pregunta.ID_pregunta %>">
                            <input required id="texto_pregunta" name="texto_pregunta"><span ></span>
                           
                        </div>
                        
                    </div>
                <% } %>  

                <div class="center ">
                    <button type="submit" class="waves-effect waves-light btn">Guardar</button>
                    <a href = "/home" class="waves-effect waves-light btn">Cancelar</a> 
                     <button type="button" id="agregar" class="waves-effect waves-light btn">Agregar pregunta</button> 
                     <button type="button" id="eliminar" class="waves-effect waves-light btn">Eliminar pregunta</button> 
                </div>
                <br><br>
                
            </form>
            <!-- <form action="" method="post">
                
            </form> -->
            <br><br>
            
        
    
    

    	
	<script>

        (function load(){
            const $btnAdd = document.getElementById("agregar")
            const $form = document.getElementById("form")
            const templateElement = () => {
                return (`
                
                        <div class="row col s6">
                            <input required id="texto_pregunta" name="texto_respuesta"><span ></span>
                            <label for="ID_pregunta">Pregunta nueva</label>
                        </div>
                    
                `)
            }
            $btnAdd.addEventListener("click", (event) => {
                const $div = document.createElement("div")
                $div.innerHTML = templateElement()
                $form.insertBefore($div, $form.lastChild)
                
            })
            const $btnEli = document.getElementById("eliminar")
                const $form1 = document.getElementById("divpreg")
                const $div1 = $form.lastElementChild;
                $btnEli.addEventListener("click", (event) => {
                    $form1.removeChild($div1)
            })

        })()
    </script>

    <script>
        (function load(){
            

        })()
    </script>
    
<%- include('includes/footer.ejs') %>