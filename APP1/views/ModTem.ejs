<%- include('includes/head.ejs') %>
    <div class="container">

         <ul id = "dropdown1" class=" hide-on-med-and-down dropdown-content">
            <% for (let categoria of categorias) { %>
                <li class="">
                    <a href="/modificar_template/get_preg/<%= categoria.ID_categoria %>" class=""><%= categoria.nombre_categoria %></a>
                </li>
            <% } %>
         </ul>
        <nav class="grey darken-3">
            <div class="nav-wrapper">
                <li><a class="dropdown-trigger" href="#!" data-target="dropdown1">Cambiar Categoria<i class="material-icons right">arrow_drop_down</i></a></li>
            </div>
        </nav>
        <div class="">
            <form action="" method="POST" id="form" class="respuesta_ajax">
                <div >
                    <label for="">Nombre Categoria</label>
                    <input required id="titulo" name="titulo"><span class=""></span>
                    
                </div>
                <div >
                    <label for="">Tiempo estimado</label>
                    <input required id="tiempo" name="tiempo"><span class=""></span>
                    
                </div>
                <% for (let pregunta of preguntas) { %> 
                    <div>
                        <label  href="/modificar_template/get_preg/<%= pregunta.ID_categoria %>" ><%= pregunta.texto_pregunta %></label>
                        <div class="row col s6">
                            <input required id="texto_pregunta" name="texto_respuesta"><span ></span>
                            <label for="ID_pregunta">Pregunta nueva</label>
                        </div>
                        
                    </div>
                <% } %>  
                <div class="center ">
                    <button type="submit" class="waves-effect waves-light btn">Guardar</button>
                    <!-- <button href = "/home" class="waves-effect waves-light btn">Cancelar</button> -->
                    <button type="button" id="agregar" class="waves-effect waves-light btn">Agregar pregunta</button>
                    <!-- <button href = "/modificar_template/de_preg" type="button" id="eliminar" class="waves-effect waves-light btn">Eliminar pregunta</button> -->
                </div>
            </form>
            
        </div>
    
    </div>

    	
	<script>
        let parameters = []


        const addJsonElement = json => {
            parameters.push(json)
            return parameters.length - 1
        }

        (function load(){
            const $btnAdd = document.getElementById("agregar")
            const $form = document.getElementById("form")
            const templateElement = () => {
                return (`
                    <div>
                        <div class="row col s6">
                            <input required id="texto_pregunta" name="texto_respuesta"><span ></span>
                            <label for="ID_pregunta">Pregunta nueva</label>
                        </div>
                    </div>
                `)
            }
            $btnAdd.addEventListener("click", (event) => {
                const $div = document.createElement("div")
                $div.classList.add("grupo")
                $div.innerHTML = templateElement()
                $form.insertBefore($div, $form.lastChild)
            })

        })()
    </script>

    
<%- include('includes/footer.ejs') %>